<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Profile</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      background: #fafafa;
      color: #333;
    }

    .navbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px;
      background: #fff;
      border-bottom: 1px solid #ddd;
      position: sticky;
      top: 0;
    }

    .navbar button {
      background: #0095f6;
      color: #fff;
      border: none;
      padding: 8px 14px;
      border-radius: 5px;
      cursor: pointer;
    }

    .profile-header {
      display: flex;
      align-items: center;
      padding: 20px;
    }

    .profile-pic img {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      object-fit: cover;
      margin-right: 20px;
      border: 2px solid #ddd;
    }

    .profile-info h2 {
      margin: 0;
      font-size: 24px;
    }

    .edit-btn {
      background: #efefef;
      border: 1px solid #ddd;
      padding: 5px 12px;
      border-radius: 5px;
      cursor: pointer;
      margin-top: 8px;
    }

    .profile-stats {
      display: flex;
      gap: 20px;
      margin: 10px 0;
      list-style: none;
      padding: 0;
    }

    .profile-bio {
      font-size: 14px;
    }

    .add-post {
      text-align: center;
      padding: 20px;
    }

    .add-post input[type="file"] {
      display: none;
    }

    .custom-file-upload {
      border: 1px solid #ddd;
      display: inline-block;
      padding: 10px 20px;
      cursor: pointer;
      border-radius: 5px;
      background: #0095f6;
      color: #fff;
    }

    .posts {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 8px;
      padding: 10px;
    }

    .post {
      position: relative;
    }

    .post img {
      width: 100%;
      aspect-ratio: 1 / 1; /* makes all posts square */
      object-fit: cover;
      border-radius: 5px;
    }

    .post-actions {
      display: flex;
      justify-content: space-between;
      padding: 5px;
      font-size: 14px;
    }

    .like, .comment, .delete {
      cursor: pointer;
    }

    .liked {
      color: red;
      font-weight: bold;
    }
    .button {
  display: inline-block;
  padding: 8px 16px;
  font-size: 14px;
  font-weight: 600;
  color: #fff;
  background-color: #3897f0; /* Instagram blue */
  border: none;
  border-radius: 5px;
  text-decoration: none;
  cursor: pointer;
  transition: background 0.3s ease;
}

.button:hover {
  background-color: #3183d6; /* darker blue on hover */
}

  </style>
</head>
<body>

  <!-- Navbar -->
  <div class="navbar">
    <h3>My Profile</h3>
        <a href="{% url 'home' %}" class="button">Back</a>
  </div>

  <!-- Profile Header -->
  <div class="profile-header">
    <div class="profile-pic">
      <img src="https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?w=500" alt="Profile Picture">
    </div>
    <div class="profile-info">
      <h2 id="username">{% if user.is_authenticated %}{{ user.username }}{% else %}Guest{% endif %}</h2>
      <button class="edit-btn" onclick="editProfile()">Edit Profile</button>
      <ul class="profile-stats">
        <li><span id="postCount">2</span> posts</li>
        <li><span id="followers">200</span> followers</li>
        <li><span id="following">180</span> following</li>
      </ul>
      <div class="profile-bio" id="bio">
        <p>This is my bio.</p>
      </div>
    </div>
  </div>

  <!-- Add Post -->
  <div class="add-post">
    <label for="file-upload" class="custom-file-upload">+ Add Post</label>
    <input id="file-upload" type="file" accept="image/*" onchange="addPost(event)">
  </div>

  <!-- Posts Grid -->
  <div class="posts" id="posts">
    <!-- Random Preloaded Posts -->
    <div class="post">
      <img src="https://images.unsplash.com/photo-1506744038136-46273834b3fb?w=600" alt="Post 1">
      <div class="post-actions">
        <span class="like" onclick="toggleLike(this)">‚ù§Ô∏è Like</span>
        <span class="comment" onclick="addComment(this)">üí¨ Comment</span>
        <span class="delete" onclick="deletePost(this)">üóëÔ∏è Delete</span>
      </div>
    </div>
    <div class="post">
      <img src="https://images.unsplash.com/photo-1529626455594-4ff0802cfb7e?w=600" alt="Post 2">
      <div class="post-actions">
        <span class="like" onclick="toggleLike(this)">‚ù§Ô∏è Like</span>
        <span class="comment" onclick="addComment(this)">üí¨ Comment</span>
        <span class="delete" onclick="deletePost(this)">üóëÔ∏è Delete</span>
      </div>
    </div>
  </div>

  <script>
    function goBack() {
      window.location.href = "home.html";
    }

    function editProfile() {
      let newUsername = prompt("Enter new username:", document.getElementById("username").innerText);
      if (newUsername) {
        document.getElementById("username").innerText = newUsername;
      }
      let newBio = prompt("Enter new bio:", document.getElementById("bio").innerText);
      if (newBio) {
        document.getElementById("bio").innerHTML = `<p>${newBio}</p>`;
      }
    }

    function addPost(event) {
      const postsContainer = document.getElementById("posts");
      const postCount = document.getElementById("postCount");

      const file = event.target.files[0];
      if (!file) return;

      const reader = new FileReader();
      reader.onload = function(e) {
        const postDiv = document.createElement("div");
        postDiv.classList.add("post");
        postDiv.innerHTML = `
          <img src="${e.target.result}" alt="Post">
          <div class="post-actions">
            <span class="like" onclick="toggleLike(this)">‚ù§Ô∏è Like</span>
            <span class="comment" onclick="addComment(this)">üí¨ Comment</span>
            <span class="delete" onclick="deletePost(this)">üóëÔ∏è Delete</span>
          </div>
        `;
        postsContainer.prepend(postDiv);

        postCount.innerText = parseInt(postCount.innerText) + 1;
      };
      reader.readAsDataURL(file);
    }

    function toggleLike(element) {
      element.classList.toggle("liked");
      element.innerText = element.classList.contains("liked") ? "‚ù§Ô∏è Liked" : "‚ù§Ô∏è Like";
    }

    function addComment(element) {
      let comment = prompt("Write your comment:");
      if (comment) {
        alert("Your comment: " + comment);
      }
    }

    function deletePost(element) {
      if (confirm("Are you sure you want to delete this post?")) {
        element.closest(".post").remove();
        const postCount = document.getElementById("postCount");
        postCount.innerText = parseInt(postCount.innerText) - 1;
      }
    }
  </script>

</body>
</html>
